apply plugin: 'java'

buildscript {
  repositories {
    maven { url 'http://jcenter.bintray.com/' }
    maven { url 'https://plugins.gradle.org/m2/' }
  }
  dependencies {
    classpath 'eu.appsatori:gradle-fatjar-plugin:0.3'
    classpath 'gradle.plugin.edu.sc.seis:macAppBundle:2.1.3'
  }
}

apply plugin: 'eu.appsatori.fatjar'
apply plugin: 'edu.sc.seis.macAppBundle'

repositories {
  mavenCentral()
}

configurations.all {
  exclude(group: 'commons-logging')
}

dependencies {
  compile 'joda-time:joda-time:2.1'
  compile 'org.slf4j:slf4j-simple:1.6.6'
  compile 'org.slf4j:jcl-over-slf4j:1.6.6'

  compile 'commons-io:commons-io:2.4'
  compile 'commons-cli:commons-cli:1.2'
  compile 'commons-lang:commons-lang:2.6'

  compile 'com.jgoodies:forms:1.2.1'
  compile 'com.jgoodies:looks:2.2.2'

  compile group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.11.663'

  testCompile 'junit:junit:4.10'
  testCompile 'org.mockito:mockito-core:1.9.0'
  testCompile 'org.hamcrest:hamcrest-all:1.1'
  testCompile 'com.googlecode.windowlicker:windowlicker-swing:r268'
}

fatJarPrepareFiles {
  exclude 'META-INF/*.SF'
  exclude 'META-INF/*.DSA'
  exclude 'META-INF/*.RSA'
}

fatJar {
  manifest {
    attributes(
      'Main-Class': 'com.tomczarniecki.s3.Main',
      'Implementation-Version': version?: 'dev'
    )
  }
}

macAppBundle {
  mainClassName = 'com.tomczarniecki.s3.Main'
  icon = 'etc/zim.icns'
}

task(wrapper, type: Wrapper) {
  gradleVersion = '4.3.1'
}
